# ============================================================
# 公告监听器配置文件
# ============================================================

# ------------------------------------------------------------
# 标签匹配规则
# ------------------------------------------------------------
# 规则按顺序匹配，第一个匹配成功的规则将被应用
# 如果所有规则都不匹配，tag 将为 None
#
# 每条规则包含：
#   - tag: 要打的标签名称
#   - patterns: 正则表达式列表（满足任意一个即可）
#   - case_sensitive: 是否区分大小写（可选，默认 false）

tag_rules:
  # 下架/退市（优先级更高，避免被 listing 误匹配）
  - tag: "下架退市"
    case_sensitive: false
    patterns:
      - "下架"
      - "退市"
      - "delisting"
      - "delist"
      - "removal.*trading"
      - "suspend.*trading"
      - "停止.*交易"
  
  # 新币上线
  - tag: "新币上线"
    case_sensitive: false
    patterns:
      - "上线.*交易对"
      - "will list"
      - "(?<!de)listing"  # 排除 delisting
      - "new.*listing"
      - "新币"
      - "上市"
      - "launch.*trading"
      - "opens.*trading"
  
  # 维护升级
  - tag: "维护升级"
    case_sensitive: false
    patterns:
      - "维护"
      - "升级"
      - "maintenance"
      - "upgrade"
      - "system.*update"
      - "暂停.*充提"
      - "suspend.*deposit"
      - "suspend.*withdrawal"
  
  # 空投/活动
  - tag: "空投活动"
    case_sensitive: false
    patterns:
      - "空投"
      - "airdrop"
      - "活动"
      - "campaign"
      - "promotion"
      - "奖励"
      - "reward"
      - "giveaway"
  
  # 合约/杠杆
  - tag: "合约杠杆"
    case_sensitive: false
    patterns:
      - "合约"
      - "杠杆"
      - "futures"
      - "perpetual"
      - "leverage"
      - "margin"
      - "swap"
  
  # 重要公告
  - tag: "重要公告"
    case_sensitive: false
    patterns:
      - "重要"
      - "important"
      - "urgent"
      - "紧急"
      - "安全"
      - "security"
      - "风险"
      - "risk"


# ------------------------------------------------------------
# 标签过滤规则
# ------------------------------------------------------------
# 只有匹配以下标签的公告才会被推送到飞书
# 如果 allowed_tags 为空列表，则推送所有公告

filter:
  # 允许推送的标签列表
  allowed_tags:
    - "新币上线"
    - "下架退市"
    # - "维护升级"
    # - "空投活动"
    # - "合约杠杆"
    - "重要公告"
  
  # 是否允许推送无标签的公告
  allow_no_tag: false


# ------------------------------------------------------------
# 监听器运行参数
# ------------------------------------------------------------

monitor:
  # 是否在首次运行时初始化历史记录（标记现有公告为已推送）
  # true: 首次运行时不推送已有公告，只推送新公告
  # false: 首次运行时也会推送所有符合条件的公告
  init_history_on_first_run: true
  
  # 循环次数限制
  # 0 或 null: 无限循环
  # 正整数: 执行指定次数后退出
  max_cycles: 0
  
  # 每次循环的平均间隔时间（秒）
  interval_seconds: 600
  
  # 间隔时间的随机偏移范围（秒）
  # 实际等待时间 = interval_seconds ± random(-interval_random, +interval_random)
  interval_random: 50
  
  # 每个交易所获取的公告数量
  fetch_limit: 10
  
  # 推送到飞书后的等待时间（秒）
  # 避免发送过快导致被拒绝
  notify_delay: 1.0
